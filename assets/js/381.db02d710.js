(window.webpackJsonp=window.webpackJsonp||[]).push([[381],{659:function(s,t,a){"use strict";a.r(t);var n=a(14),e=Object(n.a)({},(function(){var s=this,t=s._self._c;return t("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[t("h1",{attrs:{id:"元类钩子"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#元类钩子"}},[s._v("#")]),s._v(" 元类钩子")]),s._v(" "),t("h2",{attrs:{id:"​-init-​、-new-​、-call-​"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#​-init-​、-new-​、-call-​"}},[s._v("#")]),s._v(" ​"),t("code",[s._v("__init__")]),s._v("​、"),t("code",[s._v("__new__")]),s._v("​、"),t("code",[s._v("__call__")]),s._v("​")]),s._v(" "),t("p",[s._v("见元类概述")]),s._v(" "),t("p",[s._v("‍")]),s._v(" "),t("h2",{attrs:{id:"init-subclass-​"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#init-subclass-​"}},[s._v("#")]),s._v(" "),t("code",[s._v("__init_subclass__")]),s._v("​")]),s._v(" "),t("div",{staticClass:"language-python extra-class"},[t("pre",{pre:!0,attrs:{class:"language-python"}},[t("code",[t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("class")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("MyBaseClass")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("def")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("__init_subclass__")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("cls"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("**")]),s._v("kwargs"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token builtin"}},[s._v("super")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("__init_subclass__"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("**")]),s._v("kwargs"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("if")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("not")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token builtin"}},[s._v("hasattr")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("cls"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'required_attribute'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n            "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("raise")]),s._v(" TypeError"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token string-interpolation"}},[t("span",{pre:!0,attrs:{class:"token string"}},[s._v('f"')]),t("span",{pre:!0,attrs:{class:"token interpolation"}},[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("cls"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("__name__"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")])]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v(" is missing the required attribute 'required_attribute'\"")])]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("class")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("MySubClass")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("MyBaseClass"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n    required_attribute "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'some value'")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("class")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("MyOtherSubClass")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("MyBaseClass"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("pass")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# TypeError: MyOtherSubClass is missing the required attribute 'required_attribute'")]),s._v("\n")])])]),t("p",[s._v("‍")]),s._v(" "),t("h2",{attrs:{id:"​-set-name-​​"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#​-set-name-​​"}},[s._v("#")]),s._v(" ​"),t("code",[s._v("__set_name__")]),s._v("​​")]),s._v(" "),t("p",[s._v("当定义了"),t("code",[s._v("__set_name__")]),s._v("​的方法被作为右值赋值时，会自动触发这一方法-目前分析主要用于描述符协议中。")]),s._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[s._v("class Bar:\n    def __set_name__"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("self, owner, name"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(":\n        print"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("f"),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'{self} was named {name} by {owner}'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n\nclass Foo:\n    x "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" Bar"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n    y "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" Bar"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('""')]),s._v('"\n'),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("__main__.Bar object at 0x000001CF9D9FB7C"),t("span",{pre:!0,attrs:{class:"token operator"}},[t("span",{pre:!0,attrs:{class:"token file-descriptor important"}},[s._v("0")]),s._v(">")]),s._v(" was named x by "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("class "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'__main__.Foo'")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("__main__.Bar object at 0x000001CF9D5AA88"),t("span",{pre:!0,attrs:{class:"token operator"}},[t("span",{pre:!0,attrs:{class:"token file-descriptor important"}},[s._v("0")]),s._v(">")]),s._v(" was named y by "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("class "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'__main__.Foo'")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('""')]),s._v('"\n')])])]),t("p",[s._v("‍")])])}),[],!1,null,null,null);t.default=e.exports}}]);