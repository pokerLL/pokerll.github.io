(window.webpackJsonp=window.webpackJsonp||[]).push([[139],{418:function(t,u,n){"use strict";n.r(u);var r=n(14),s=Object(r.a)({},(function(){var t=this,u=t._self._c;return u("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[u("h1",{attrs:{id:"subprocess"}},[u("a",{staticClass:"header-anchor",attrs:{href:"#subprocess"}},[t._v("#")]),t._v(" subprocess")]),t._v(" "),u("p",[t._v("‍")]),t._v(" "),u("h2",{attrs:{id:"check-output​执行外部命令"}},[u("a",{staticClass:"header-anchor",attrs:{href:"#check-output​执行外部命令"}},[t._v("#")]),t._v(" "),u("code",[t._v("check_output")]),t._v("​执行外部命令")]),t._v(" "),u("p",[t._v("可以使用"),u("code",[t._v("subprocess.check_output()")]),t._v("​执行一个外部命令并获取执行结果，此外还可以通过strerr参数来重定向错误输入以收集，可以使用timeout参数来使用超时机制来执行命令，使用shell参数来让命令被shell执行。")]),t._v(" "),u("p",[t._v("如果执行失败则catch的Exception中会带有一些信息，例如"),u("code",[t._v("e.ouput")]),t._v("​是报错之前的输出，"),u("code",[t._v("e.returncode")]),t._v("​是返回码。")]),t._v(" "),u("div",{staticClass:"language-python extra-class"},[u("pre",{pre:!0,attrs:{class:"language-python"}},[u("code",[u("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" subprocess\nout_bytes "),u("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" subprocess"),u("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("check_output"),u("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),u("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),u("span",{pre:!0,attrs:{class:"token string"}},[t._v("'netstat'")]),u("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),u("span",{pre:!0,attrs:{class:"token string"}},[t._v("'-a'")]),u("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),u("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\nout_text "),u("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" out_bytes"),u("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("decode"),u("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),u("span",{pre:!0,attrs:{class:"token string"}},[t._v("'utf-8'")]),u("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\n"),u("span",{pre:!0,attrs:{class:"token triple-quoted-string string"}},[t._v("\"\"\"\n>>> import subprocess\n>>> out_bytes = subprocess.check_outpit(['ls','-al'])\nTraceback (most recent call last):\n  File \"<stdin>\", line 1, in <module>\nAttributeError: module 'subprocess' has no attribute 'check_outpit'\n>>> out_bytes = subprocess.check_output(['ls','-al'])\n>>> out_bytes\nb'total 120\\ndrwx------ 6 ubuntu ubuntu  4096 Mar  9 10:26 .\\ndrwxr-xr-x 6 root   root    4096 Jan 21 00:51 ..\\n-rw-r--r-- 1 ubuntu ubuntu 54422 Mar  9 10:27 .bash_history\\ndrwx------ 2 ubuntu ubuntu  4096 Aug 12  2020 .cache\\n-rw-r--r-- 1 root   root       0 Aug 12  2020 .cloud-warnings.skip\\n-rw-rw-r-- 1 ubuntu ubuntu    90 Jan 29 17:45 .gitconfig\\ndrwxr-xr-x 2 root   root    4096 Apr 13  2021 .pip\\n-rw-r--r-- 1 root   root      73 Apr 13  2021 .pydistutils.cfg\\ndrwx------ 2 ubuntu ubuntu  4096 Jan 29 17:46 .ssh\\n-rw-r--r-- 1 ubuntu ubuntu     0 Aug 12  2020 .sudo_as_admin_successful\\ndrwxr-xr-x 2 ubuntu ubuntu  4096 Jan 21 14:31 .vim\\n-rw------- 1 ubuntu ubuntu 19937 Feb  3 10:21 .viminfo\\n-rw-rw-r-- 1 ubuntu ubuntu   165 Jan 31 18:13 .wget-hsts\\n-rw------- 1 ubuntu ubuntu   183 Mar  9 10:26 .Xauthority\\n'\n>>> out_text = out_bytes.decode('utf-8')\n>>> out_text\n'total 120\\ndrwx------ 6 ubuntu ubuntu  4096 Mar  9 10:26 .\\ndrwxr-xr-x 6 root   root    4096 Jan 21 00:51 ..\\n-rw-r--r-- 1 ubuntu ubuntu 54422 Mar  9 10:27 .bash_history\\ndrwx------ 2 ubuntu ubuntu  4096 Aug 12  2020 .cache\\n-rw-r--r-- 1 root   root       0 Aug 12  2020 .cloud-warnings.skip\\n-rw-rw-r-- 1 ubuntu ubuntu    90 Jan 29 17:45 .gitconfig\\ndrwxr-xr-x 2 root   root    4096 Apr 13  2021 .pip\\n-rw-r--r-- 1 root   root      73 Apr 13  2021 .pydistutils.cfg\\ndrwx------ 2 ubuntu ubuntu  4096 Jan 29 17:46 .ssh\\n-rw-r--r-- 1 ubuntu ubuntu     0 Aug 12  2020 .sudo_as_admin_successful\\ndrwxr-xr-x 2 ubuntu ubuntu  4096 Jan 21 14:31 .vim\\n-rw------- 1 ubuntu ubuntu 19937 Feb  3 10:21 .viminfo\\n-rw-rw-r-- 1 ubuntu ubuntu   165 Jan 31 18:13 .wget-hsts\\n-rw------- 1 ubuntu ubuntu   183 Mar  9 10:26 .Xauthority\\n'\n\"\"\"")]),t._v("\n")])])])])}),[],!1,null,null,null);u.default=s.exports}}]);