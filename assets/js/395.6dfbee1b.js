(window.webpackJsonp=window.webpackJsonp||[]).push([[395],{673:function(t,s,a){"use strict";a.r(s);var n=a(14),e=Object(n.a)({},(function(){var t=this,s=t._self._c;return s("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[s("h1",{attrs:{id:"描述符覆盖行为"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#描述符覆盖行为"}},[t._v("#")]),t._v(" 描述符覆盖行为")]),t._v(" "),s("h2",{attrs:{id:"描述器分类"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#描述器分类"}},[t._v("#")]),t._v(" 描述器分类")]),t._v(" "),s("div",{staticClass:"language-python extra-class"},[s("pre",{pre:!0,attrs:{class:"language-python"}},[s("code",[t._v("descr"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("__get__"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("self"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" obj"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("type")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("None")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" value\ndescr"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("__set__"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("self"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" obj"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" value"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("None")]),t._v("\ndescr"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("__delete__"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("self"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" obj"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("None")]),t._v("\n")])])]),s("p",[t._v("同时定义"),s("code",[t._v("__get__()")]),t._v("​ 和 "),s("code",[t._v("__set__()")]),t._v("​的称为数据描述器或强制描述符。")]),t._v(" "),s("p",[t._v("仅定义 "),s("code",[t._v("__get__()")]),t._v("​的称为非数据描述器或遮盖型描述符。")]),t._v(" "),s("p",[t._v("仅定义 "),s("code",[t._v("__set__()")]),t._v("​的称为覆盖型描述符，没有定义"),s("code",[t._v("__set__")]),t._v("​的称为非覆盖描述符。")]),t._v(" "),s("p",[t._v("‍")]),t._v(" "),s("h2",{attrs:{id:"覆盖型描述符和非覆盖型描述符"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#覆盖型描述符和非覆盖型描述符"}},[t._v("#")]),t._v(" 覆盖型描述符和非覆盖型描述符")]),t._v(" "),s("h3",{attrs:{id:"覆盖性描述符"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#覆盖性描述符"}},[t._v("#")]),t._v(" 覆盖性描述符")]),t._v(" "),s("p",[t._v("覆盖性描述符：实现了"),s("code",[t._v("__set__")]),t._v("​​方法的描述符")]),t._v(" "),s("ul",[s("li",[s("p",[t._v("没有实现"),s("code",[t._v("__get__")]),t._v("​​方法的话")]),t._v(" "),s("ul",[s("li",[s("p",[t._v("如果实例属性空间"),s("code",[t._v("__dict__")]),t._v("​中有同名属性，则获取时会被实例属性空间中的同名属性覆盖，但是赋值时还是被"),s("code",[t._v("__set__")]),t._v("​接管")]),t._v(" "),s("div",{staticClass:"language-python extra-class"},[s("pre",{pre:!0,attrs:{class:"language-python"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("print")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("man"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("over_no_get"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("      "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# <__main__.OverridingNoGet object at 0x000002009326F6C8>")]),t._v("\nman"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("over_no_get "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"MMMMM"')]),t._v("   "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# -> OverridingNoGet.__set__(<OverridingNoGet object>, <Managed object>, <str object>)")]),t._v("\nman"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("__dict__"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"over_no_get"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"man-over_no_get"')]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("print")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("man"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("over_no_get"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("      "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# man-over_no_get")]),t._v("\nman"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("over_no_get "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"MMMMM"')]),t._v("   "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# -> OverridingNoGet.__set__(<OverridingNoGet object>, <Managed object>, <str object>)")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("print")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("man"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("over_no_get"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("      "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# man-over_no_get")]),t._v("\n")])])])])])]),t._v(" "),s("li",[s("p",[t._v("实现了"),s("code",[t._v("__get__")]),t._v("​​方法")]),t._v(" "),s("ul",[s("li",[t._v("明显，获取和赋值都会被接管")])])])]),t._v(" "),s("p",[t._v("‍")]),t._v(" "),s("h3",{attrs:{id:"非覆盖描述符"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#非覆盖描述符"}},[t._v("#")]),t._v(" 非覆盖描述符")]),t._v(" "),s("p",[t._v("非覆盖描述符：没有实现"),s("code",[t._v("__set__")]),t._v("​方法的描述符")]),t._v(" "),s("p",[t._v("因为没有实现"),s("code",[t._v("__set__")]),t._v("​所以只要产生赋值操作都会在实例属性空间中创建同名属性，之后再获取或者赋值都走属性空间")]),t._v(" "),s("div",{staticClass:"language-python extra-class"},[s("pre",{pre:!0,attrs:{class:"language-python"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("print")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("man"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("non_over"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# -> NonOverriding.__get__(<NonOverriding object>, <Managed object>, <class Managed>)")]),t._v("\n                    "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# None")]),t._v("\nman"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("non_over "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"NNNNN"')]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("print")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("vars")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("man"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("    "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# {'non_over': 'NNNNN'}")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("print")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("man"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("non_over"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# NNNNN")]),t._v("\nman"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("__dict__"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"non_over"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"man-non_over"')]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("print")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("man"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("non_over"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# man-non_over")]),t._v("\nman"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("non_over "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"NNNNN"')]),t._v(" \n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("print")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("man"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("non_over"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# NNNNN")]),t._v("\n")])])]),s("p",[t._v("‍")]),t._v(" "),s("h2",{attrs:{id:"总结"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#总结"}},[t._v("#")]),t._v(" 总结")]),t._v(" "),s("p",[t._v("总的来说，python按照以下顺序查找属性")]),t._v(" "),s("ol",[s("li",[t._v("MRO顺序中的类的类属性中的数据描述符")]),t._v(" "),s("li",[t._v("实例属性空间中的同名属性")]),t._v(" "),s("li",[t._v("MRO顺序中的类的类属性中的非数据描述符")]),t._v(" "),s("li",[t._v("MRO顺序中的类的类属性中的普通属性")])])])}),[],!1,null,null,null);s.default=e.exports}}]);