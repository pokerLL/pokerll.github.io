(window.webpackJsonp=window.webpackJsonp||[]).push([[105],{383:function(t,s,a){"use strict";a.r(s);var n=a(14),e=Object(n.a)({},(function(){var t=this,s=t._self._c;return s("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[s("h1",{attrs:{id:"配置日志的几种方式"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#配置日志的几种方式"}},[t._v("#")]),t._v(" 配置日志的几种方式")]),t._v(" "),s("hr"),t._v(" "),s("ul",[s("li",[s("a",{attrs:{href:"https://www.cnblogs.com/yyds/p/6885182.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("https://www.cnblogs.com/yyds/p/6885182.html"),s("OutboundLink")],1)]),t._v(" "),s("li",[t._v("作为开发者，我们可以通过以下3种方式来配置logging: 1）使用Python代码显式的创建loggers, handlers和formatters并分别调用它们的配置函数； 2）创建一个日志配置文")]),t._v(" "),s("li",[t._v("2022-05-27 19:24:00")])]),t._v(" "),s("hr"),t._v(" "),s("p",[t._v("作为开发者，我们可以通过以下3种方式来配置logging:")]),t._v(" "),s("ul",[s("li",[t._v("1）使用Python代码显式的创建loggers, handlers和formatters并分别调用它们的配置函数；")]),t._v(" "),s("li",[t._v("2）创建一个日志配置文件，然后使用"),s("code",[t._v("fileConfig()")]),t._v("函数来读取该文件的内容；")]),t._v(" "),s("li",[t._v("3）创建一个包含配置信息的dict，然后把它传递个"),s("code",[t._v("dictConfig()")]),t._v("函数；")])]),t._v(" "),s("p",[t._v("需要说明的是，"),s("code",[t._v("logging.basicConfig()")]),t._v("也属于第一种方式，它只是对loggers, handlers和formatters的配置函数进行了封装。另外，第二种配置方式相对于第一种配置方式的优点在于，它将配置信息和代码进行了分离，这一方面降低了日志的维护成本，同时还使得非开发人员也能够去很容易地修改日志配置。")]),t._v(" "),s("h2",{attrs:{id:"一、使用python代码实现日志配置"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#一、使用python代码实现日志配置"}},[t._v("#")]),t._v(" 一、使用Python代码实现日志配置")]),t._v(" "),s("hr"),t._v(" "),s("p",[t._v("代码如下：")]),t._v(" "),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 创建一个日志器logger并设置其日志级别为DEBUG")]),t._v("\nlogger "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" logging.getLogger"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'simple_logger'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\nlogger.setLevel"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("logging.DEBUG"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 创建一个流处理器handler并设置其日志级别为DEBUG")]),t._v("\nhandler "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" logging.StreamHandler"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("sys.stdout"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\nhandler.setLevel"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("logging.DEBUG"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 创建一个格式器formatter并将其添加到处理器handler")]),t._v("\nformatter "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" logging.Formatter"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"%(asctime)s - %(name)s - %(levelname)s - %(message)s"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\nhandler.setFormatter"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("formatter"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 为日志器logger添加上面创建的处理器handler")]),t._v("\nlogger.addHandler"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("handler"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 日志输出")]),t._v("\nlogger.debug"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'debug message'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\nlogger.info"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'info message'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\nlogger.warn"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'warn message'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\nlogger.error"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'error message'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\nlogger.critical"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'critical message'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])]),s("p",[t._v("运行输出：")]),t._v(" "),s("div",{staticClass:"language-yaml extra-class"},[s("pre",{pre:!0,attrs:{class:"language-yaml"}},[s("code",[t._v("2017"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v("05"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v("15 11"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),s("span",{pre:!0,attrs:{class:"token datetime number"}},[t._v("30:50")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("955 "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" simple_logger "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" DEBUG "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" debug message\n2017"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v("05"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v("15 11"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),s("span",{pre:!0,attrs:{class:"token datetime number"}},[t._v("30:50")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("955 "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" simple_logger "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" INFO "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" info message\n2017"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v("05"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v("15 11"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),s("span",{pre:!0,attrs:{class:"token datetime number"}},[t._v("30:50")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("955 "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" simple_logger "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" WARNING "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" warn message\n2017"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v("05"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v("15 11"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),s("span",{pre:!0,attrs:{class:"token datetime number"}},[t._v("30:50")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("955 "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" simple_logger "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" ERROR "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" error message\n2017"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v("05"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v("15 11"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),s("span",{pre:!0,attrs:{class:"token datetime number"}},[t._v("30:50")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("955 "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" simple_logger "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" CRITICAL "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" critical message\n")])])]),s("h2",{attrs:{id:"二、使用配置文件和fileconfig-函数实现日志配置"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#二、使用配置文件和fileconfig-函数实现日志配置"}},[t._v("#")]),t._v(" 二、使用配置文件和fileConfig()函数实现日志配置")]),t._v(" "),s("hr"),t._v(" "),s("p",[t._v("现在我们通过配置文件的方式来实现与上面同样的功能：")]),t._v(" "),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 读取日志配置文件内容")]),t._v("\nlogging.config.fileConfig"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'logging.conf'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 创建一个日志器logger")]),t._v("\nlogger "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" logging.getLogger"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'simpleExample'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 日志输出")]),t._v("\nlogger.debug"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'debug message'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\nlogger.info"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'info message'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\nlogger.warn"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'warn message'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\nlogger.error"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'error message'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\nlogger.critical"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'critical message'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])]),s("p",[t._v("配置文件"),s("code",[t._v("logging.conf")]),t._v("内容如下：")]),t._v(" "),s("div",{staticClass:"language-makefile extra-class"},[s("pre",{pre:!0,attrs:{class:"language-makefile"}},[s("code",[t._v("[loggers]\nkeys"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("root,simpleExample\n\n[handlers]\nkeys"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("fileHandler,consoleHandler\n\n[formatters]\nkeys"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("simpleFormatter\n\n[logger_root]\nlevel"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("DEBUG\nhandlers"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("fileHandler\n\n[logger_simpleExample]\nlevel"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("DEBUG\nhandlers"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("consoleHandler\nqualname"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("simpleExample\npropagate"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("0\n\n[handler_consoleHandler]\nclass"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("StreamHandler\nargs"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("sys.stdout,"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\nlevel"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("DEBUG\nformatter"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("simpleFormatter\n\n[handler_fileHandler]\nclass"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("FileHandler\nargs"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'logging.log'")]),t._v(", "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'a'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\nlevel"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("ERROR\nformatter"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("simpleFormatter\n\n[formatter_simpleFormatter]\nformat"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("%"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("asctime"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("s - %"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("name"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("s - %"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("levelname"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("s - %"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("message"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("s\ndatefmt"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("\n")])])]),s("p",[t._v("运行输出：")]),t._v(" "),s("div",{staticClass:"language-yaml extra-class"},[s("pre",{pre:!0,attrs:{class:"language-yaml"}},[s("code",[t._v("2017"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v("05"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v("15 11"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),s("span",{pre:!0,attrs:{class:"token datetime number"}},[t._v("32:16")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("539 "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" simpleExample "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" DEBUG "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" debug message\n2017"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v("05"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v("15 11"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),s("span",{pre:!0,attrs:{class:"token datetime number"}},[t._v("32:16")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("555 "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" simpleExample "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" INFO "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" info message\n2017"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v("05"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v("15 11"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),s("span",{pre:!0,attrs:{class:"token datetime number"}},[t._v("32:16")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("555 "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" simpleExample "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" WARNING "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" warn message\n2017"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v("05"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v("15 11"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),s("span",{pre:!0,attrs:{class:"token datetime number"}},[t._v("32:16")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("555 "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" simpleExample "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" ERROR "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" error message\n2017"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v("05"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v("15 11"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),s("span",{pre:!0,attrs:{class:"token datetime number"}},[t._v("32:16")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("555 "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" simpleExample "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" CRITICAL "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" critical message\n")])])]),s("h3",{attrs:{id:"_1-关于fileconfig-函数的说明"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_1-关于fileconfig-函数的说明"}},[t._v("#")]),t._v(" 1. 关于"),s("code",[t._v("fileConfig()")]),t._v("函数的说明：")]),t._v(" "),s("p",[t._v("该函数实际上是对"),s("code",[t._v("configparser")]),t._v("模块的封装，关于"),s("code",[t._v("configparser")]),t._v("模块的介绍请参考"),s("a",{attrs:{href:"http://www.cnblogs.com/yyds/p/6627208.html",target:"_blank",rel:"noopener noreferrer"}},[s("OutboundLink")],1),t._v("​"),s("a",{attrs:{href:"http://www.cnblogs.com/yyds/p/6627208.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("Python之xml文档及配置文件处理"),s("OutboundLink")],1),t._v("​"),s("a",{attrs:{href:"http://www.cnblogs.com/yyds/p/6627208.html",target:"_blank",rel:"noopener noreferrer"}},[s("OutboundLink")],1),t._v("​"),s("a",{attrs:{href:""}},[s("code",[t._v("&amp;lt;&lt;")])]),t._v("​"),s("a",{attrs:{href:""}},[s("code",[t._v("&amp;lt;&lt;")])]),t._v("​"),s("a",{attrs:{href:""}},[s("code",[t._v("&amp;gt;&gt;")])]),t._v("​"),s("a",{attrs:{href:""}},[s("code",[t._v("&amp;gt;&gt;")])]),t._v("。")]),t._v(" "),s("h5",{attrs:{id:"函数定义"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#函数定义"}},[t._v("#")]),t._v(" 函数定义：")]),t._v(" "),s("p",[t._v("该函数定义在loging.config模块下：")]),t._v(" "),s("div",{staticClass:"language-python extra-class"},[s("pre",{pre:!0,attrs:{class:"language-python"}},[s("code",[t._v("logging"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("config"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("fileConfig"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("fname"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" defaults"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("None")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" disable_existing_loggers"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("True")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])]),s("h5",{attrs:{id:"参数"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#参数"}},[t._v("#")]),t._v(" 参数：")]),t._v(" "),s("ul",[s("li",[t._v("fname：表示配置文件的文件名或文件对象")]),t._v(" "),s("li",[t._v("defaults：指定传给ConfigParser的默认值")]),t._v(" "),s("li",[t._v("disable_existing_loggers：这是一个布尔型值，默认值为True（为了向后兼容）表示禁用已经存在的logger，除非它们或者它们的祖先明确的出现在日志配置中；如果值为False则对已存在的loggers保持启动状态。")])]),t._v(" "),s("h3",{attrs:{id:"_2-配置文件格式说明"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_2-配置文件格式说明"}},[t._v("#")]),t._v(" 2. 配置文件格式说明：")]),t._v(" "),s("p",[t._v("上面提到过，"),s("code",[t._v("fileConfig()")]),t._v("函数是对"),s("code",[t._v("ConfigParser/configparser")]),t._v("模块的封装，也就是说"),s("code",[t._v("fileConfig()")]),t._v("函数是基于"),s("code",[t._v("ConfigParser/configparser")]),t._v("模块来理解日志配置文件的。换句话说，"),s("code",[t._v("fileConfig()")]),t._v("函数所能理解的配置文件基础格式是与"),s("code",[t._v("ConfigParser/configparser")]),t._v("模块一致的，只是在此基础上对文件中包含的"),s("code",[t._v("section")]),t._v("和"),s("code",[t._v("option")]),t._v("做了一下规定和限制，比如：")]),t._v(" "),s("ul",[s("li",[s("p",[t._v("1）配置文件中一定要包含"),s("code",[t._v("loggers")]),t._v("、"),s("code",[t._v("handlers")]),t._v("、"),s("code",[t._v("formatters")]),t._v("这些section，它们通过"),s("code",[t._v("keys")]),t._v("这个option来指定该配置文件中已经定义好的loggers、handlers和formatters，多个值之间用逗号分隔；另外"),s("code",[t._v("loggers")]),t._v("这个section中的keys一定要包含root这个值；")])]),t._v(" "),s("li",[s("p",[t._v("2）"),s("code",[t._v("loggers")]),t._v("、"),s("code",[t._v("handlers")]),t._v("、"),s("code",[t._v("formatters")]),t._v("中所指定的日志器、处理器和格式器都需要在下面以单独的section进行定义。seciton的命名规则为"),s("code",[t._v("[logger_loggerName]")]),t._v("、"),s("code",[t._v("[formatter_formatterName]")]),t._v("、"),s("code",[t._v("[handler_handlerName]")])])]),t._v(" "),s("li",[s("p",[t._v("3）定义logger的section必须指定"),s("code",[t._v("level")]),t._v("和"),s("code",[t._v("handlers")]),t._v("这两个option，"),s("code",[t._v("level")]),t._v("的可取值为"),s("code",[t._v("DEBUG")]),t._v("、"),s("code",[t._v("INFO")]),t._v("、"),s("code",[t._v("WARNING")]),t._v("、"),s("code",[t._v("ERROR")]),t._v("、"),s("code",[t._v("CRITICAL")]),t._v("、"),s("code",[t._v("NOTSET")]),t._v("，其中"),s("code",[t._v("NOTSET")]),t._v("表示所有级别的日志消息都要记录，包括用户定义级别；"),s("code",[t._v("handlers")]),t._v("的值是以逗号分隔的handler名字列表，这里出现的handler必须出现在[handlers]这个section中，并且相应的handler必须在配置文件中有对应的section定义；")])]),t._v(" "),s("li",[s("p",[t._v("4）对于非root logger来说，除了"),s("code",[t._v("level")]),t._v("和"),s("code",[t._v("handlers")]),t._v("这两个option之外，还需要一些额外的option，其中"),s("code",[t._v("qualname")]),t._v("是必须提供的option，它表示在logger层级中的名字，在应用代码中通过这个名字得到logger；"),s("code",[t._v("propagate")]),t._v("是可选项，其默认是为1，表示消息将会传递给高层次logger的handler，通常我们需要指定其值为0，这个可以看下下面的例子；另外，对于非root logger的level如果设置为NOTSET，系统将会查找高层次的logger来决定此logger的有效level。")])]),t._v(" "),s("li",[s("p",[t._v("5）定义handler的section中必须指定"),s("code",[t._v("class")]),t._v("和"),s("code",[t._v("args")]),t._v("这两个option，"),s("code",[t._v("level")]),t._v("和"),s("code",[t._v("formatter")]),t._v("为可选option；"),s("code",[t._v("class")]),t._v("表示用于创建handler的类名，"),s("code",[t._v("args")]),t._v("表示传递给"),s("code",[t._v("class")]),t._v("所指定的handler类初始化方法参数")]),t._v(" "),s("p",[t._v("，它必须是一个元组（tuple）的形式，即便只有一个参数值也需要是一个元组的形式；"),s("code",[t._v("level")]),t._v("与logger中的level一样，而"),s("code",[t._v("formatter")]),t._v("指定的是该处理器所使用的格式器，这里指定的格式器名称必须出现在"),s("code",[t._v("formatters")]),t._v("这个section中，且在配置文件中必须要有这个formatter的section定义；如果不指定formatter则该handler将会以消息本身作为日志消息进行记录，而不添加额外的时间、日志器名称等信息；")])]),t._v(" "),s("li",[s("p",[t._v("6）定义formatter的sectioin中的option都是可选的，其中包括"),s("code",[t._v("format")]),t._v("用于指定格式字符串，默认为消息字符串本身；"),s("code",[t._v("datefmt")]),t._v("用于指定asctime的时间格式，默认为"),s("code",[t._v("'%Y-%m-%d %H:%M:%S'")]),t._v("；"),s("code",[t._v("class")]),t._v("用于指定格式器类名，默认为logging.Formatter；")])])]),t._v(" "),s("blockquote",[s("p",[s("em",[s("strong",[t._v("说明：")])])]),t._v(" "),s("p",[t._v("配置文件中的"),s("code",[t._v("class")]),t._v("指定类名时，该类名可以是相对于logging模块的相对值，如："),s("code",[t._v("FileHandler")]),t._v("、"),s("code",[t._v("handlers.TimeRotatingFileHandler")]),t._v("；也可以是一个绝对路径值，通过普通的import机制来解析，如自定义的handler类"),s("code",[t._v("mypackage.mymodule.MyHandler")]),t._v("，但是mypackage需要在Python可用的导入路径中--sys.path。")])]),t._v(" "),s("h3",{attrs:{id:"_3-对于propagate属性的说明"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_3-对于propagate属性的说明"}},[t._v("#")]),t._v(" 3. 对于propagate属性的说明")]),t._v(" "),s("h5",{attrs:{id:"实例1"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#实例1"}},[t._v("#")]),t._v(" 实例1：")]),t._v(" "),s("p",[t._v("我们把"),s("code",[t._v("logging.conf")]),t._v("中simpleExample这个handler定义中的propagate属性值改为1，或者删除这个option（默认值就是1）：")]),t._v(" "),s("div",{staticClass:"language-ini extra-class"},[s("pre",{pre:!0,attrs:{class:"language-ini"}},[s("code",[s("span",{pre:!0,attrs:{class:"token section"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),s("span",{pre:!0,attrs:{class:"token section-name selector"}},[t._v("logger_simpleExample")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")])]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token key attr-name"}},[t._v("level")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token value attr-value"}},[t._v("DEBUG")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token key attr-name"}},[t._v("handlers")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token value attr-value"}},[t._v("consoleHandler")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token key attr-name"}},[t._v("qualname")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token value attr-value"}},[t._v("simpleExample")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token key attr-name"}},[t._v("propagate")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token value attr-value"}},[t._v("1")]),t._v("\n")])])]),s("p",[t._v("现在来执行同样的代码：")]),t._v(" "),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 读取日志配置文件内容")]),t._v("\nlogging.config.fileConfig"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'logging.conf'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 创建一个日志器logger")]),t._v("\nlogger "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" logging.getLogger"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'simpleExample'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 日志输出")]),t._v("\nlogger.debug"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'debug message'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\nlogger.info"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'info message'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\nlogger.warn"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'warn message'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\nlogger.error"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'error message'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\nlogger.critical"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'critical message'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])]),s("p",[t._v("我们会发现，除了在控制台有输出信息时候，在logging.log文件中也有内容输出:")]),t._v(" "),s("div",{staticClass:"language-vbnet extra-class"},[s("pre",{pre:!0,attrs:{class:"language-vbnet"}},[s("code",[s("span",{pre:!0,attrs:{class:"token number"}},[t._v("2017")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("05")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("15")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("16")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("06")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("25")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("366")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v(" simpleExample "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("ERROR")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("error")]),t._v(" message\n"),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("2017")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("05")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("15")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("16")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("06")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("25")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("367")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v(" simpleExample "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v(" CRITICAL "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v(" critical message\n")])])]),s("p",[t._v("这说明simpleExample这个logger在处理完日志记录后，把日志记录传递给了上级的root logger再次做处理，所有才会有两个地方都有日志记录的输出。通常，我们都需要显示的指定propagate的值为0，防止日志记录向上层logger传递。")]),t._v(" "),s("h5",{attrs:{id:"实例2"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#实例2"}},[t._v("#")]),t._v(" 实例2：")]),t._v(" "),s("p",[t._v("现在，我们试着用一个没有在配置文件中定义的logger名称来获取logger：")]),t._v(" "),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 读取日志配置文件内容")]),t._v("\nlogging.config.fileConfig"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'logging.conf'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 用一个没有在配置文件中定义的logger名称来创建一个日志器logger")]),t._v("\nlogger "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" logging.getLogger"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'simpleExample1'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 日志输出")]),t._v("\nlogger.debug"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'debug message'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\nlogger.info"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'info message'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\nlogger.warn"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'warn message'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\nlogger.error"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'error message'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\nlogger.critical"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'critical message'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])]),s("p",[t._v("运行程序后，我们会发现控制台没有任何输出，而logging.log文件中又多了两行输出：")]),t._v(" "),s("div",{staticClass:"language-vbnet extra-class"},[s("pre",{pre:!0,attrs:{class:"language-vbnet"}},[s("code",[s("span",{pre:!0,attrs:{class:"token number"}},[t._v("2017")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("05")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("15")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("16")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("13")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("16")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("810")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v(" simpleExample1 "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("ERROR")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("error")]),t._v(" message\n"),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("2017")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("05")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("15")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("16")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("13")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("16")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("810")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v(" simpleExample1 "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v(" CRITICAL "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v(" critical message\n")])])]),s("p",[t._v("这是因为，当一个日志器没有被设置任何处理器是，系统会去查找该日志器的上层日志器上所设置的日志处理器来处理日志记录。simpleExample1在配置文件中没有被定义，因此"),s("code",[t._v("logging.getLogger(simpleExample1)")]),t._v("这行代码这是获取了一个logger实例，并没有给它设置任何处理器，但是它的上级日志器--root logger在配置文件中有定义且设置了一个FileHandler处理器，simpleExample1处理器最终通过这个FileHandler处理器将日志记录输出到logging.log文件中了。")]),t._v(" "),s("h2",{attrs:{id:"三、使用字典配置信息和dictconfig-函数实现日志配置"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#三、使用字典配置信息和dictconfig-函数实现日志配置"}},[t._v("#")]),t._v(" 三、使用字典配置信息和dictConfig()函数实现日志配置")]),t._v(" "),s("hr"),t._v(" "),s("p",[t._v("Python 3.2中引入的一种新的配置日志记录的方法--用字典来保存logging配置信息。这相对于上面所讲的基于配置文件来保存logging配置信息的方式来说，功能更加强大，也更加灵活，因为我们可把很多的数据转换成字典。比如，我们可以使用JSON格式的配置文件、YAML格式的配置文件，然后将它们填充到一个配置字典中；或者，我们也可以用Python代码构建这个配置字典，或者通过socket接收pickled序列化后的配置信息。总之，你可以使用你的应用程序可以操作的任何方法来构建这个配置字典。")]),t._v(" "),s("p",[t._v("这个例子中，我们将使用YAML格式来完成与上面同样的日志配置。")]),t._v(" "),s("p",[t._v("首先需要安装PyYAML模块：")]),t._v(" "),s("div",{staticClass:"language-mipsasm extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v("pip install PyYAML\n")])])]),s("p",[t._v("Python代码：")]),t._v(" "),s("div",{staticClass:"language-lua extra-class"},[s("pre",{pre:!0,attrs:{class:"language-lua"}},[s("code",[t._v("import logging\nimport logging"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("config\nimport yaml\n\nwith "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("open")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'logging.yml'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'r'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" as f_conf"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n    dict_conf "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" yaml"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("load")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("f_conf"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\nlogging"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("config"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("dictConfig")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("dict_conf"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\nlogger "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" logging"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("getLogger")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'simpleExample'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\nlogger"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("debug")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'debug message'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\nlogger"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("info")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'info message'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\nlogger"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("warn")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'warn message'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\nlogger"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("error")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'error message'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\nlogger"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("critical")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'critical message'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])]),s("p",[t._v("logging.yml配置文件的内容：")]),t._v(" "),s("div",{staticClass:"language-yaml extra-class"},[s("pre",{pre:!0,attrs:{class:"language-yaml"}},[s("code",[s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("version")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("formatters")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("simple")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("format")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'%(asctime)s - %(name)s - %(levelname)s - %(message)s'")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("handlers")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("console")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("class")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" logging.StreamHandler\n    "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("level")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" DEBUG\n    "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("formatter")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" simple\n    "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("stream")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" ext"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("//sys.stdout\n  "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("console_err")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("class")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" logging.StreamHandler\n    "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("level")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" ERROR\n    "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("formatter")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" simple\n    "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("stream")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" ext"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("//sys.stderr\n"),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("loggers")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("simpleExample")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("level")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" DEBUG\n    "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("handlers")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("console"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("propagate")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" yes\n"),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("root")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("level")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" DEBUG\n  "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("handlers")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("console_err"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n")])])]),s("p",[t._v("输出结果：")]),t._v(" "),s("div",{staticClass:"language-yaml extra-class"},[s("pre",{pre:!0,attrs:{class:"language-yaml"}},[s("code",[t._v("2017"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v("05"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v("21 14"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),s("span",{pre:!0,attrs:{class:"token datetime number"}},[t._v("19:31")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("089 "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" simpleExample "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" DEBUG "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" debug message\n2017"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v("05"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v("21 14"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),s("span",{pre:!0,attrs:{class:"token datetime number"}},[t._v("19:31")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("089 "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" simpleExample "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" INFO "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" info message\n2017"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v("05"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v("21 14"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),s("span",{pre:!0,attrs:{class:"token datetime number"}},[t._v("19:31")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("089 "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" simpleExample "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" WARNING "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" warn message\n2017"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v("05"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v("21 14"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),s("span",{pre:!0,attrs:{class:"token datetime number"}},[t._v("19:31")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("089 "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" simpleExample "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" ERROR "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" error message\n2017"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v("05"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v("21 14"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),s("span",{pre:!0,attrs:{class:"token datetime number"}},[t._v("19:31")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("090 "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" simpleExample "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" CRITICAL "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" critical message\n")])])]),s("h3",{attrs:{id:"_1-关于dictconfig-函数的说明"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_1-关于dictconfig-函数的说明"}},[t._v("#")]),t._v(" 1. 关于"),s("code",[t._v("dictConfig()")]),t._v("函数的说明：")]),t._v(" "),s("p",[t._v("该函数实际上是对"),s("code",[t._v("configparser")]),t._v("模块的封装，关于"),s("code",[t._v("configparser")]),t._v("模块的介绍请参考"),s("a",{attrs:{href:"http://www.cnblogs.com/yyds/p/6627208.html",target:"_blank",rel:"noopener noreferrer"}},[s("OutboundLink")],1),t._v("​"),s("a",{attrs:{href:"http://www.cnblogs.com/yyds/p/6627208.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("Python之xml文档及配置文件处理"),s("OutboundLink")],1),t._v("​"),s("a",{attrs:{href:"http://www.cnblogs.com/yyds/p/6627208.html",target:"_blank",rel:"noopener noreferrer"}},[s("OutboundLink")],1),t._v("​"),s("a",{attrs:{href:""}},[s("code",[t._v("&amp;lt;&lt;")])]),t._v("​"),s("a",{attrs:{href:""}},[s("code",[t._v("&amp;lt;&lt;")])]),t._v("​"),s("a",{attrs:{href:""}},[s("code",[t._v("&amp;gt;&gt;")])]),t._v("​"),s("a",{attrs:{href:""}},[s("code",[t._v("&amp;gt;&gt;")])]),t._v("。")]),t._v(" "),s("h5",{attrs:{id:"函数定义-2"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#函数定义-2"}},[t._v("#")]),t._v(" 函数定义：")]),t._v(" "),s("p",[t._v("该函数定义在loging.config模块下：")]),t._v(" "),s("div",{staticClass:"language-lua extra-class"},[s("pre",{pre:!0,attrs:{class:"language-lua"}},[s("code",[t._v("logging"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("config"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("dictConfig")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("config"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])]),s("p",[t._v("该函数可以从一个字典对象中获取日志配置信息，config参数就是这个字典对象。关于这个字典对象的内容规则会在下面进行描述。")]),t._v(" "),s("h3",{attrs:{id:"_2-配置字典说明"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_2-配置字典说明"}},[t._v("#")]),t._v(" 2. 配置字典说明")]),t._v(" "),s("p",[t._v('无论是上面提到的配置文件，还是这里的配置字典，它们都要描述出日志配置所需要创建的各种对象以及这些对象之间的关联关系。比如，可以先创建一个名额为“simple”的格式器formatter；然后创建一个名为“console”的处理器handler，并指定该handler输出日志所使用的格式器为"simple"；然后再创建一个日志器logger，并指定它所使用的处理器为"console"。')]),t._v(" "),s("p",[t._v("传递给dictConfig()函数的字典对象只能包含下面这些keys，其中"),s("code",[t._v("version")]),t._v("是必须指定的key，其它key都是可选项：")]),t._v(" "),s("table",[s("thead",[s("tr",[s("th",[t._v("key名称")]),t._v(" "),s("th",[t._v("描述")])])]),t._v(" "),s("tbody",[s("tr",[s("td",[t._v("version")]),t._v(" "),s("td",[t._v("必选项，其值是一个整数值，表示配置格式的版本，当前唯一可用的值就是1")])]),t._v(" "),s("tr",[s("td",[t._v("formatters")]),t._v(" "),s("td",[t._v("可选项，其值是一个字典对象，该字典对象每个元素的key为要定义的格式器名称，value为格式器的配置信息组成的dict，如format和datefmt")])]),t._v(" "),s("tr",[s("td",[t._v("filters")]),t._v(" "),s("td",[t._v("可选项，其值是一个字典对象，该字典对象每个元素的key为要定义的过滤器名称，value为过滤器的配置信息组成的dict，如name")])]),t._v(" "),s("tr",[s("td",[t._v("handlers")]),t._v(" "),s("td",[t._v("可选项，其值是一个字典对象，该字典对象每个元素的key为要定义的处理器名称，value为处理器的配置信息组成的dcit，如class、level、formatter和filters，其中class为必选项，其它为可选项；其他配置信息将会传递给class所指定的处理器类的构造函数，如下面的handlers定义示例中的stream、filename、maxBytes和backupCount等")])]),t._v(" "),s("tr",[s("td",[t._v("loggers")]),t._v(" "),s("td",[t._v("可选项，其值是一个字典对象，该字典对象每个元素的key为要定义的日志器名称，value为日志器的配置信息组成的dcit，如level、handlers、filters 和 propagate（yes")])]),t._v(" "),s("tr",[s("td",[t._v("root")]),t._v(" "),s("td",[t._v("可选项，这是root logger的配置信息，其值也是一个字典对象。除非在定义其它logger时明确指定propagate值为no，否则root logger定义的handlers都会被作用到其它logger上")])]),t._v(" "),s("tr",[s("td",[t._v("incremental")]),t._v(" "),s("td",[t._v("可选项，默认值为False。该选项的意义在于，如果这里定义的对象已经存在，那么这里对这些对象的定义是否应用到已存在的对象上。值为False表示，已存在的对象将会被重新定义。")])]),t._v(" "),s("tr",[s("td",[t._v("disable_existing_loggers")]),t._v(" "),s("td",[t._v("可选项，默认值为True。该选项用于指定是否禁用已存在的日志器loggers，如果incremental的值为True则该选项将会被忽略")])])])]),t._v(" "),s("p",[t._v("handlers定义示例：")]),t._v(" "),s("div",{staticClass:"language-yaml extra-class"},[s("pre",{pre:!0,attrs:{class:"language-yaml"}},[s("code",[s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("handlers")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("console")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("class")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" logging.StreamHandler\n    "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("formatter")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" brief\n    "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("level")]),t._v("   "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" INFO\n    "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("filters")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("allow_foo"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("stream")]),t._v("  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" ext"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("//sys.stdout\n  "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("file")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("class")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" logging.handlers.RotatingFileHandler\n    "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("formatter")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" precise\n    "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("filename")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" logconfig.log\n    "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("maxBytes")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("1024")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("backupCount")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("3")]),t._v("\n\n")])])]),s("h3",{attrs:{id:"_3-关于外部对象的访问"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_3-关于外部对象的访问"}},[t._v("#")]),t._v(" 3. 关于外部对象的访问")]),t._v(" "),s("p",[t._v("需要说明的是，上面所使用的对象并不限于loggging模块所提供的对象，我们可以实现自己的formatter或handler类。另外，这些类的参数也许需要包含sys.stderr这样的外部对象。如果配置字典对象是使用Python代码构造的，可以直接使用sys.stdout、sys.stderr；但是当通过文本文件（如JSON、YAML格式的配置文件）提供配置时就会出现问题，因为在文本文件中，没有标准的方法来区分"),s("code",[t._v("sys.stderr")]),t._v("和字符串"),s("code",[t._v("'sys.stderr'")]),t._v("。为了区分它们，配置系统会在字符串值中查找特定的前缀，例如'ext://sys.stderr'中'ext://'会被移除，然后"),s("code",[t._v("import sys.stderr")]),t._v("。")]),t._v(" "),s("ul",[s("li",[t._v("参考文档："),s("a",{attrs:{href:"https://docs.python.org/3.5/library/logging.config.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("https://docs.python.org/3.5/library/logging.config.html"),s("OutboundLink")],1)])])])}),[],!1,null,null,null);s.default=e.exports}}]);